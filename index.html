<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ù…Ø­ÙØ¸Ø© GoldCrypto</title>
<style>
  body {
    background: linear-gradient(to bottom, #1e1e2f, #292945);
    color: #f5f5f5;
    font-family: "Cairo", sans-serif;
    text-align: center;
    padding: 20px;
  }
  h1 { color: #ffcc00; }
  .btn {
    padding: 10px 20px; margin: 5px;
    background: #ffcc00; color: #000;
    border: none; border-radius: 8px; cursor: pointer; font-weight: bold;
  }
  .btn:hover { background: #ffd633; }
  .section { display: none; margin-top: 20px; }
  .input { padding: 8px; margin: 5px; border-radius: 6px; border: none; text-align: center; }
  table {
    width: 80%; margin: 20px auto; border-collapse: collapse;
    background: #2f2f47; border-radius: 12px; overflow: hidden;
  }
  th, td { padding: 12px; border-bottom: 1px solid #444; }
  th { background-color: #ffcc00; color: #000; }
  #log, #clientLog { margin-top: 20px; max-height: 200px; overflow-y: auto; text-align: right; }
</style>
</head>
<body>
<h1>ğŸ’° Ù…Ø­ÙØ¸Ø© GoldCrypto</h1>

<!-- Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="mainMenu">
  <button class="btn" onclick="showSection('clientLogin')">ğŸ‘¤ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„</button>
  <button class="btn" onclick="adminAccess()">âš™ï¸ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
</div>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
<div id="clientLogin" class="section">
  <h2>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„</h2>
  <input class="input" id="clientName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨">
  <input class="input" id="clientCard" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ù†ÙƒÙŠØ©">
  <input type="password" class="input" id="clientPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button class="btn" onclick="clientLogin()">Ø¯Ø®ÙˆÙ„</button>
  <button class="btn" onclick="showSection('mainMenu')">ğŸ”™ Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
<div id="clientDashboard" class="section">
  <h2>ğŸ“Š Ù…Ø­ÙØ¸ØªÙŠ</h2>
  <div id="clientWallet"></div>
  <h3>ğŸ“œ Ø³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ§ØªÙŠ</h3>
  <div id="clientLog"></div>
  <button class="btn" onclick="clientReport()">ğŸ“ Ø·Ù„Ø¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
  <button class="btn" onclick="logout()">ğŸ”™ Ø®Ø±ÙˆØ¬</button>
</div>

<!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
<div id="adminDashboard" class="section">
  <h2>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
  <h3>â• Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ÙØ¸Ø©</h3>
  <input class="input" id="newName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨">
  <input class="input" id="newCard" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ù†ÙƒÙŠØ©">
  <input type="password" class="input" id="newPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button class="btn" onclick="createWallet()">Ø¥Ù†Ø´Ø§Ø¡</button>

  <h3>ğŸ’± ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ©</h3>
  <select class="input" id="accountSelect"></select>
  <select class="input" id="cryptoSelect"></select>
  <select class="input" id="typeSelect">
    <option value="buy">Ø´Ø±Ø§Ø¡</option>
    <option value="sell">Ø¨ÙŠØ¹</option>
  </select>
  <input type="number" class="input" id="amountInput" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
  <button class="btn" onclick="addOperation()">ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>

  <h3>ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3>
  <div id="log">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯.</div>
  <button class="btn" onclick="fullReport()">ğŸ“ ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„</button>
  <button class="btn" onclick="resetData()">â™»ï¸ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
  <button class="btn" onclick="logout()">ğŸ”™ Ø®Ø±ÙˆØ¬</button>
</div>

<script>
let cryptos = [
  {name: "Bitcoin (BTC)", price: 1000, dailyLimit: 1},
  {name: "DASH", price: 250, dailyLimit: 3},
  {name: "Tether (USDT)", price: 100, dailyLimit: 5},
  {name: "Monero (XMR)", price: 600, dailyLimit: 1},
  {name: "Nano (NANO)", price: 120, dailyLimit: 10},
  {name: "Litecoin (LTC)", price: 300, dailyLimit: 2},
];

let buyImpact = 0.20;
let sellImpact = 0.15;

let wallets = JSON.parse(localStorage.getItem('wallets') || '[]');
let operations = JSON.parse(localStorage.getItem('operations') || '[]');
let currentUser = null;

const cryptoSelect = document.getElementById('cryptoSelect');
cryptos.forEach((c,i)=>{
  let opt = document.createElement("option");
  opt.value = i;
  opt.textContent = `${c.name} (${c.price}G)`;
  cryptoSelect.appendChild(opt);
});

function saveData(){
  localStorage.setItem('wallets', JSON.stringify(wallets));
  localStorage.setItem('operations', JSON.stringify(operations));
}

function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.style.display='none');
  document.getElementById(id).style.display='block';
}

function adminAccess(){
  let pass = prompt("Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:");
  if(pass === "TECNO LD7") showSection('adminDashboard');
  else alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø§Ø·Ø¦Ø©");
}

function createWallet(){
  let name = newName.value.trim();
  let card = newCard.value.trim();
  let pass = newPass.value.trim();
  if(!name||!card||!pass){alert("âŒ Ø£Ø¯Ø®Ù„ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");return;}
  if(wallets.find(w=>w.card===card)){alert("âŒ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù…Ø³Ø¬Ù„Ø© Ù…Ø³Ø¨Ù‚Ø§Ù‹");return;}
  let code = "Z"+wallets.length.toString().padStart(3,"0")+"Z";
  let wallet = {name, card, pass, code, coins:{}, bought:{}, sold:{}, logs:[]};
  cryptos.forEach(c=>{wallet.coins[c.name]=0;wallet.bought[c.name]=0;wallet.sold[c.name]=0;});
  wallets.push(wallet); saveData(); alert("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­ÙØ¸Ø© ÙˆÙƒÙˆØ¯Ù‡Ø§: "+code);
  updateAccountSelect();
}

function updateAccountSelect(){
  accountSelect.innerHTML="";
  wallets.forEach((w,i)=>{
    let opt=document.createElement("option");
    opt.value=i; opt.textContent=`${w.name} (${w.code})`;
    accountSelect.appendChild(opt);
  });
}
updateAccountSelect();

function addOperation(){
  let wi = +accountSelect.value;
  let ci = +cryptoSelect.value;
  let type = typeSelect.value;
  let amount = +amountInput.value;
  if(amount<=0){alert("âŒ Ø£Ø¯Ø®Ù„ ÙƒÙ…ÙŠØ© ØµØ­ÙŠØ­Ø©");return;}
  let w = wallets[wi]; let c = cryptos[ci];

  if(type==='buy'){
    if(w.bought[c.name]+amount > c.dailyLimit){
      alert("âŒ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„Ø©"); return;
    }
    let totalPrice = c.price * amount;
    w.coins[c.name]+=amount; w.bought[c.name]+=amount;
    let log=`âœ… ${w.name} Ø§Ø´ØªØ±Ù‰ ${amount} ${c.name} Ø¨Ø³Ø¹Ø± ${totalPrice.toFixed(2)}G`;
    w.logs.push(log); operations.push(log);
    c.price *= (1+buyImpact)**amount;
  } else {
    if(w.coins[c.name]<amount){alert("âŒ Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ");return;}
    let totalPrice = c.price * amount;
    w.coins[c.name]-=amount; w.sold[c.name]+=amount;
    let log=`ğŸ’± ${w.name} Ø¨Ø§Ø¹ ${amount} ${c.name} Ø¨Ø³Ø¹Ø± ${totalPrice.toFixed(2)}G`;
    w.logs.push(log); operations.push(log);
    c.price *= (1-sellImpact)**amount;
  }

  log.innerHTML = operations.map(o=>`â€¢ ${o}`).join("<br>");
  saveData(); renderClient(); renderAdminTable();
}

function renderClient(){
  if(!currentUser) return;
  let w = wallets.find(x=>x.code===currentUser);
  if(!w) return;
  clientWallet.innerHTML = "<table><tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„Ø±ØµÙŠØ¯</th></tr>"+Object.keys(w.coins).map(k=>`<tr><td>${k}</td><td>${w.coins[k]}</td></tr>`).join("")+"</table>";
  clientLog.innerHTML = w.logs.length?w.logs.join("<br>"):"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯";
}

function clientLogin(){
  let name=clientName.value.trim(), card=clientCard.value.trim(), pass=clientPass.value.trim();
  let w = wallets.find(x=>x.name===name && x.card===card && x.pass===pass);
  if(!w){alert("âŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø®Ø§Ø·Ø¦Ø©");return;}
  currentUser=w.code; showSection('clientDashboard'); renderClient();
}

function clientReport(){
  let w = wallets.find(x=>x.code===currentUser);
  alert(`ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø­Ø³Ø§Ø¨Ùƒ:\n${w.logs.join("\n")}`);
}

function fullReport(){
  let report = "ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„:\n\n"+operations.join("\n");
  alert(report||"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª");
}

function resetData(){
  if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†ØŸ")){
    wallets=[]; operations=[]; cryptos.forEach(c=>c.price=c.price);
    saveData(); updateAccountSelect(); log.innerHTML="ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ†";
  }
}

function logout(){
  currentUser=null; showSection('mainMenu');
}

function renderAdminTable(){
  cryptoSelect.innerHTML="";
  cryptos.forEach((c,i)=>{
    let opt=document.createElement("option");
    opt.value=i; opt.textContent=`${c.name} (${c.price.toFixed(2)}G)`;
    cryptoSelect.appendChild(opt);
  });
}

renderAdminTable();
log.innerHTML = operations.length?operations.map(o=>`â€¢ ${o}`).join("<br>"):"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¹Ø¯";
</script>
</body>
</html>