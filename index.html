<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>نظام المحافظ الرقمية</title>
  <style>
    body { background-color: #121212; color: #f1f1f1; font-family: Arial, sans-serif; text-align: center; }
    h1, h2 { color: #00d1b2; }
    .hidden { display: none; }
    .container { max-width: 800px; margin: auto; padding: 20px; }
    input, button { padding: 10px; margin: 5px; border-radius: 5px; border: none; }
    input { width: 70%; }
    button { background-color: #00d1b2; color: white; cursor: pointer; }
    button:hover { background-color: #00bfa0; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #555; padding: 10px; }
    th { background-color: #1f1f1f; }
    td { background-color: #1a1a1a; }
    .admin-section { border: 2px solid #00d1b2; padding: 15px; margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>💰 نظام المحافظ الرقمية</h1>
    <h2>عرض أسعار العملات الحالية</h2>
    <table>
      <thead>
        <tr>
          <th>العملة</th>
          <th>السعر الحالي (G)</th>
        </tr>
      </thead>
      <tbody id="priceTable">
        <tr><td>بتكوين</td><td id="btcPrice">1000</td></tr>
        <tr><td>داش</td><td id="dashPrice">500</td></tr>
        <tr><td>نانو</td><td id="nanoPrice">300</td></tr>
      </tbody>
    </table>

    <h2>تسجيل الدخول</h2>
    <input type="text" id="username" placeholder="اسم المستخدم"><br>
    <input type="text" id="bankCode" placeholder="كود البطاقة البنكية"><br>
    <input type="text" id="walletCode" placeholder="كود المحفظة"><br>
    <input type="password" id="password" placeholder="كلمة السر"><br>
    <button onclick="login()">تسجيل الدخول</button>

    <div id="userSection" class="hidden">
      <h2>مرحبا بك</h2>
      <p>رصيدك الحالي:</p>
      <ul id="balances"></ul>
      <h3>سجل عملياتك</h3>
      <ul id="history"></ul>
    </div>

    <div id="adminSection" class="hidden admin-section">
      <h2>الإدارة العادية</h2>
      <button onclick="showAddWallet()">إضافة محفظة جديدة</button>
      <button onclick="showBuy()">شراء</button>
      <button onclick="showSell()">بيع</button>
      <div id="adminContent"></div>
    </div>

    <div id="superAdminSection" class="hidden admin-section">
      <h2>الإدارة العليا</h2>
      <button onclick="showAccounts()">عرض/تعديل الحسابات</button>
      <button onclick="showEditPrices()">تعديل الأسعار يدويا</button>
      <button onclick="showReport()">تقرير شامل</button>
      <div id="superAdminContent"></div>
    </div>
  </div>

  <script>
    // بيانات أولية
    let prices = { BTC: 1000, DASH: 500, NANO: 300 };
    let users = [];
    let walletCounter = 0;
    let historyGlobal = [];

    // تحديث جدول الأسعار
    function updatePrices() {
      document.getElementById('btcPrice').innerText = prices.BTC;
      document.getElementById('dashPrice').innerText = prices.DASH;
      document.getElementById('nanoPrice').innerText = prices.NANO;
    }

    // تسجيل الدخول
    function login() {
      const user = document.getElementById('username').value;
      const bank = document.getElementById('bankCode').value;
      const wallet = document.getElementById('walletCode').value;
      const pass = document.getElementById('password').value;

      // تحقق من الإدارة
      if(user === "Admin" && bank === "Admin" && wallet === "admin" && pass === "TECNO LD7") {
        document.getElementById('adminSection').classList.remove('hidden');
        document.getElementById('userSection').classList.add('hidden');
        document.getElementById('superAdminSection').classList.add('hidden');
        return;
      }

      if(user === "Admin" && bank === "Admin" && wallet === "admin" && pass === "Admin super") {
        document.getElementById('superAdminSection').classList.remove('hidden');
        document.getElementById('adminSection').classList.add('hidden');
        document.getElementById('userSection').classList.add('hidden');
        return;
      }

      // تحقق من المستخدم
      const u = users.find(x => x.name===user && x.bank===bank && x.wallet===wallet && x.pass===pass);
      if(u) {
        document.getElementById('userSection').classList.remove('hidden');
        document.getElementById('adminSection').classList.add('hidden');
        document.getElementById('superAdminSection').classList.add('hidden');
        renderUser(u);
      } else {
        alert("بيانات الدخول غير صحيحة");
      }
    }

    function renderUser(u){
      const bal = document.getElementById('balances');
      bal.innerHTML = `<li>بتكوين: ${u.bal.BTC}</li><li>داش: ${u.bal.DASH}</li><li>نانو: ${u.bal.NANO}</li>`;
      const hist = document.getElementById('history');
      hist.innerHTML = u.history.map(h => `<li>${h}</li>`).join("");
    }

    // إضافة محفظة
    function showAddWallet() {
      document.getElementById('adminContent').innerHTML = `
        <h3>إضافة محفظة</h3>
        <input id="newName" placeholder="اسم المستخدم"><br>
        <input id="newBank" placeholder="كود البطاقة البنكية"><br>
        <input id="newPass" placeholder="كلمة السر"><br>
        <button onclick="addWallet()">إنشاء</button>
      `;
    }

    function addWallet(){
      const name=document.getElementById('newName').value;
      const bank=document.getElementById('newBank').value;
      const pass=document.getElementById('newPass').value;
      walletCounter++;
      const walletCode = "Z"+walletCounter.toString().padStart(3,"0")+"Z";
      users.push({name, bank, wallet:walletCode, pass, bal:{BTC:0,DASH:0,NANO:0}, history:[]});
      alert("تم إنشاء المحفظة بكود: "+walletCode);
    }

    // تحديث السعر العشوائي
    function randomPriceChange(){
      const coins=["BTC","DASH","NANO"];
      const coin = coins[Math.floor(Math.random()*coins.length)];
      const change = Math.random()<0.5?-0.15:0.2;
      prices[coin]=Math.max(1,Math.round(prices[coin]*(1+change)));
      updatePrices();
    }
    setInterval(randomPriceChange, 1200000); // كل 20 دقيقة

    updatePrices();
  </script>
</body>
</html>